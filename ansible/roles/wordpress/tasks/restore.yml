# Restore a WordPress site from backup

- assert:
    that:
      - inventory_hostname in wp_destructive
      - wp_destructive[inventory_hostname] is search("^data")
      - wp_restore_from is search("^backup")
  register: _sanitycheck_restore
- meta: end_play
  when: _sanitycheck_restore.failed

- include: restore-over-ssh.yml
  when: wp_restore_from == "backup-prod"

# TODO: There should be a choice to restore from local tarball as well.
